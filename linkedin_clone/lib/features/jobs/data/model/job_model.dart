import 'package:linkedin_clone/features/jobs/domain/entities/job_entity.dart';

class JobModel extends Job {
  JobModel({
    required String id,
    required String position,
    required String company,
    required String industry,
    required String description,
    required String location,
    required double salary,
    required String experienceLevel,
    required String locationType,
    required String employmentType,
    required DateTime postedDate,
    required int applicantCount,
    required bool isOpen,
    required String companyName,
    required String companyLogo,
    required String companyLocation,
    required String companyDescription,
    required String applicationLink,
    required bool isSaved,
    required String status,
  }) : super(
          id: id,
          position: position,
          company: company,
          industry: industry,
          description: description,
          location: location,
          salary: salary,
          experienceLevel: experienceLevel,
          locationType: locationType,
          employmentType: employmentType,
          postedDate: postedDate,
          applicantCount: applicantCount,
          isOpen: isOpen,
          companyName:companyName,
          companyLogo: companyLogo,
          companyLocation: companyLocation,
          companyDescription: companyDescription,
          applicationLink: applicationLink,
          isSaved: isSaved,
          status: status,
        );

  factory JobModel.fromJson(Map<String, dynamic> json) {
    return JobModel(
      id: json['jobId'] ?? json['id'] ?? '',
      position: json['position'] ?? '',
      company: json['companyId'] ?? '',
      industry: json['industry'] ?? '',
      description: json['description'] ?? '',
      location: json['location'] ?? '',
      salary: (json['salary'] ?? 0).toDouble(),
      experienceLevel: json['experienceLevel'] ?? '',
      locationType: json['locationType'] ?? '',
      employmentType: json['employmentType'] ?? '',
      postedDate: DateTime.tryParse(json['postedAt'] ?? '') ?? DateTime.now(),
      applicantCount: json['applicants'] ?? 0,
      isOpen: json['isOpen'] ?? true,
      companyName:json['companyName']??'',
      companyLogo: json['companyLogo'] ?? '',
      companyLocation: json['companyLocation'] ?? '',
      companyDescription: json['companyDescription'] ?? '',
      applicationLink: json['applicationLink'] ?? '',
      isSaved: json['isSaved'] ?? false,
      status: json['status'] ?? 'Pending',
    );
  }

  Map<String, dynamic> toJson() {
    return {
      'id': id,
      'position': position,
      'company': company,
      'industry': industry,
      'description': description,
      'location': location,
      'salary': salary,
      'experienceLevel': experienceLevel,
      'locationType': locationType,
      'employmentType': employmentType,
      'postedDate': postedDate.toIso8601String(),
      'applicantCount': applicantCount,
      'isOpen': isOpen,
      'companyName':companyName,
      'companyLogo': companyLogo,
      'companyLocation': companyLocation,
      'companyDescription': companyDescription,
      'applicationLink': applicationLink,
      'isSaved': isSaved,
      'status': status,
    };
  }
}
